#!/usr/bin/env php
<?php

declare(strict_types=1);

require __DIR__ . '/../vendor/autoload.php';

use RentReceiptCli\Application\Cli\ConsoleKernel;
use RentReceiptCli\Infrastructure\Logging\FileLogger;
use RentReceiptCli\Infrastructure\Logging\NullLogger;

$config = require __DIR__ . '/../config/config.php';

$logger = isset($config['logging']['dir'])
    ? new FileLogger(
        logDir: (string) $config['logging']['dir'],
        level: (string) ($config['logging']['level'] ?? 'info')
    )
    : new NullLogger();

$application = ConsoleKernel::build($logger);

exit($application->run());
